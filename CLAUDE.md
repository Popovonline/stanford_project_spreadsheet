# CLAUDE.md — Project Rules for shadcn/ui

## Project Stack

- **Framework**: Next.js 16 (App Router, React Server Components enabled)
- **Language**: TypeScript
- **Styling**: Tailwind CSS v4 with CSS Variables
- **UI Library**: shadcn/ui (`new-york` style)
- **Icons**: Lucide React
- **Package Manager**: npm

---

## shadcn/ui Core Principles

shadcn/ui is **NOT** a traditional component library installed from npm. It is a **code distribution system** that copies component source code directly into the project. You own the code and can modify it freely.

**Key principles to follow:**
1. **Open Code**: Components live in the project — modify them directly, never wrap them.
2. **Composition**: All components share a common, composable interface.
3. **CSS Variables**: This project uses CSS variables for theming (configured in `components.json`).
4. **AI-Ready**: Components are designed to be read, understood, and generated by LLMs.

---

## Project Configuration

### `components.json` (shadcn config)

```json
{
  "style": "new-york",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "",
    "css": "app/globals.css",
    "baseColor": "neutral",
    "cssVariables": true
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  }
}
```

### Path Aliases

| Alias | Path | Purpose |
|-------|------|---------|
| `@/components/ui` | `./components/ui/` | shadcn UI primitives (auto-generated) |
| `@/components` | `./components/` | Custom application components |
| `@/lib/utils` | `./lib/utils.ts` | `cn()` utility for class merging |
| `@/lib` | `./lib/` | Shared utilities and helpers |
| `@/hooks` | `./hooks/` | Custom React hooks |

---

## Adding Components

### ALWAYS use the shadcn CLI — never create UI primitives manually

```bash
# Add a single component
npx shadcn@latest add button

# Add multiple components at once
npx shadcn@latest add button card dialog input

# Add all components
npx shadcn@latest add -a

# Overwrite existing components (to update)
npx shadcn@latest add button -o
```

### Available Components

Accordion, Alert, Alert Dialog, Aspect Ratio, Avatar, Badge, Breadcrumb, Button,
Button Group, Calendar, Card, Carousel, Chart, Checkbox, Collapsible, Combobox,
Command, Context Menu, Data Table, Date Picker, Dialog, Direction, Drawer,
Dropdown Menu, Empty, Field, Hover Card, Input, Input Group, Input OTP, Item, Kbd,
Label, Menubar, Native Select, Navigation Menu, Pagination, Popover, Progress,
Radio Group, Resizable, Scroll Area, Select, Separator, Sheet, Sidebar, Skeleton,
Slider, Sonner, Spinner, Switch, Table, Tabs, Textarea, Toast, Toggle, Toggle Group,
Tooltip, Typography

---

## Component Usage Rules

### 1. Import from the correct paths

```tsx
// ✅ CORRECT: Import UI primitives from @/components/ui
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Input } from "@/components/ui/input"

// ✅ CORRECT: Import custom components from @/components
import { Header } from "@/components/header"

// ✅ CORRECT: Import utilities
import { cn } from "@/lib/utils"

// ❌ WRONG: Never import from node_modules for shadcn components
// import { Button } from "shadcn/ui"
```

### 2. Use the `cn()` utility for conditional classes

```tsx
import { cn } from "@/lib/utils"

// ✅ CORRECT: Use cn() for merging Tailwind classes
<div className={cn("flex items-center", isActive && "bg-primary", className)} />

// ❌ WRONG: String concatenation or template literals for Tailwind classes
<div className={`flex items-center ${isActive ? "bg-primary" : ""}`} />
```

### 3. Use semantic color tokens — never hardcode colors

```tsx
// ✅ CORRECT: Use shadcn CSS variable-based color tokens
<div className="bg-background text-foreground" />
<div className="bg-primary text-primary-foreground" />
<div className="bg-muted text-muted-foreground" />
<div className="bg-card text-card-foreground" />
<div className="bg-destructive text-destructive-foreground" />
<div className="border-border" />
<div className="ring-ring" />

// ❌ WRONG: Hardcoded Tailwind color classes
<div className="bg-zinc-950 text-white" />
<div className="bg-blue-500" />
```

### 4. Component composition pattern

```tsx
// ✅ CORRECT: Compose shadcn components
<Card>
  <CardHeader>
    <CardTitle>Title</CardTitle>
    <CardDescription>Description</CardDescription>
  </CardHeader>
  <CardContent>
    <p>Content goes here</p>
  </CardContent>
  <CardFooter>
    <Button>Action</Button>
  </CardFooter>
</Card>

// ✅ CORRECT: Extend with className using cn()
<Button className={cn("w-full", className)} variant="outline" size="lg">
  Click me
</Button>
```

### 5. Use Lucide icons (project configured icon library)

```tsx
// ✅ CORRECT: Import icons from lucide-react
import { ChevronRight, Search, Settings, X } from "lucide-react"

<Button variant="ghost" size="icon">
  <Settings className="h-4 w-4" />
</Button>

// ❌ WRONG: Other icon libraries
// import { FaSearch } from "react-icons/fa"
```

---

## Theming

### CSS Variable Convention

shadcn uses a `background` / `foreground` naming convention:

| Variable | Usage |
|----------|-------|
| `--background` / `--foreground` | Page background and text |
| `--primary` / `--primary-foreground` | Primary actions and their text |
| `--secondary` / `--secondary-foreground` | Secondary elements |
| `--muted` / `--muted-foreground` | Muted/disabled elements |
| `--accent` / `--accent-foreground` | Highlighted elements |
| `--destructive` / `--destructive-foreground` | Destructive/error actions |
| `--card` / `--card-foreground` | Card backgrounds and text |
| `--popover` / `--popover-foreground` | Popover backgrounds and text |
| `--border` | Border color |
| `--input` | Input border color |
| `--ring` | Focus ring color |
| `--radius` | Base border radius |
| `--chart-1` through `--chart-5` | Chart colors |
| `--sidebar-*` | Sidebar-specific colors |

### Color format: OKLCH

This project uses `oklch()` color values. When customizing theme colors, use OKLCH format:

```css
--primary: oklch(0.205 0 0);          /* near black */
--primary-foreground: oklch(0.985 0 0); /* near white */
```

### Customizing the theme

Edit CSS variables in `app/globals.css` under `:root` (light) and `.dark` (dark mode).

---

## Dark Mode

### Setup with `next-themes`

```bash
npm install next-themes
```

### Theme Provider (`components/theme-provider.tsx`)

```tsx
"use client"

import * as React from "react"
import { ThemeProvider as NextThemesProvider } from "next-themes"

export function ThemeProvider({
  children,
  ...props
}: React.ComponentProps<typeof NextThemesProvider>) {
  return <NextThemesProvider {...props}>{children}</NextThemesProvider>
}
```

### Root Layout Integration

```tsx
import { ThemeProvider } from "@/components/theme-provider"

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en" suppressHydrationWarning>
      <head />
      <body>
        <ThemeProvider
          attribute="class"
          defaultTheme="system"
          enableSystem
          disableTransitionOnChange
        >
          {children}
        </ThemeProvider>
      </body>
    </html>
  )
}
```

---

## File Structure Conventions

```
├── app/
│   ├── globals.css          # Tailwind + shadcn CSS variables + theme
│   ├── layout.tsx           # Root layout
│   └── page.tsx             # Pages
├── components/
│   ├── ui/                  # ⚠️ shadcn primitives (CLI-managed, editable)
│   │   ├── button.tsx
│   │   ├── card.tsx
│   │   └── ...
│   ├── theme-provider.tsx   # Dark mode provider
│   └── ...                  # Custom application components
├── lib/
│   └── utils.ts             # cn() utility
├── hooks/                   # Custom React hooks
└── components.json          # shadcn configuration
```

### Rules for file organization:

1. **`components/ui/`** — Only shadcn primitives. Add via CLI. You MAY edit these files to customize, but prefer extending via composition first.
2. **`components/`** — Custom components that compose shadcn primitives.
3. **`lib/utils.ts`** — Contains the `cn()` class merge utility. Do NOT remove or modify its core export.
4. **`hooks/`** — Custom hooks used across the application.

---

## React Server Components (RSC)

This project has RSC enabled (`"rsc": true` in `components.json`).

### Rules:

```tsx
// Server Components (default in App Router) — NO "use client" directive
// ✅ Can: fetch data, access backend, render shadcn components
// ❌ Cannot: use useState, useEffect, event handlers, browser APIs

// Client Components — add "use client" at the top
// ✅ Required for: interactivity, state, effects, event handlers
// ✅ Required for: shadcn components that use internal state
//    (Dialog, Dropdown Menu, Popover, Sheet, Tabs, Toast, etc.)
```

### Interactive shadcn components that require `"use client"`:

Dialog, Dropdown Menu, Popover, Sheet, Tabs, Accordion, Collapsible,
Command, Context Menu, Hover Card, Menubar, Navigation Menu, Select,
Toast/Sonner, Tooltip, Toggle, Toggle Group, Combobox, Date Picker,
Carousel, Drawer, Resizable, Sidebar

---

## Best Practices

### DO:
- ✅ Use the shadcn CLI to add new components
- ✅ Use `cn()` for all class name merging
- ✅ Use semantic color tokens (`bg-primary`, `text-muted-foreground`)
- ✅ Compose shadcn primitives to build custom components
- ✅ Use Lucide icons exclusively
- ✅ Mark interactive components with `"use client"`
- ✅ Use `forwardRef` when wrapping shadcn components
- ✅ Use Button `variant` and `size` props instead of custom classes
- ✅ Use the shadcn `Separator` instead of `<hr>` tags
- ✅ Use the shadcn `Typography` components for consistent text

### DON'T:
- ❌ Install component libraries from npm (Material UI, Chakra, Ant Design, etc.)
- ❌ Create UI primitives manually that shadcn already provides
- ❌ Use hardcoded color values — always use CSS variable tokens
- ❌ Use icon libraries other than Lucide React
- ❌ Delete or overwrite `lib/utils.ts` without preserving the `cn()` export
- ❌ Modify `components.json` manually — use the CLI for configuration
- ❌ Use inline styles for things that can be expressed with Tailwind classes
- ❌ String concatenate Tailwind classes — use `cn()` instead
